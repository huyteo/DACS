<!DOCTYPE html>
<html>
<head>
	<title>Web Api for streaming</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css" integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">	
</head>
<link rel="shortcut icon" href="data:image/x-icon;" type="image/x-icon"> 
<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js" integrity="sha384-DfXdz2htPH0lsSSs5nCTpuj/zy4C+OGpamoFVy38MVBnE+IbbVYUew+OrCXaRkfj" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.bundle.min.js" integrity="sha384-ho+j7jyWK8fNQe+A12Hb8AhRq26LrZ/JpcUGGOn+Y7RsweNrtN/tE3MoK7ZeZDyx" crossorigin="anonymous"></script>
<script>
	
	const ROOM_ID = '<%= roomId %>';
	function toggleChat() {
	    const chatWindow = document.querySelector('.main__right');
	    const videoSection = document.querySelector('.main__left');
	    
	    // Toggle class 'hidden'
	    chatWindow.classList.toggle('hidden');

	    // Adjust the width of video section
	    if (chatWindow.classList.contains('hidden')) {
	        videoSection.style.flex = '1'; // Full width when chat is hidden
	    } else {
	        videoSection.style.flex = '0.8'; // Original width when chat is visible
	    }
	}
	 // Function to adjust video section width on page load
	 function adjustVideoWidthOnLoad() {
        const chatWindow = document.querySelector('.main__right');
        const videoSection = document.querySelector('.main__left');

        // If chat window is hidden, make the video section full width
        if (chatWindow.classList.contains('hidden')) {
            videoSection.style.flex = '1'; // Full width when chat is hidden
        }
    }

    // Run adjustVideoWidthOnLoad when the DOM is fully loaded
    document.addEventListener('DOMContentLoaded', adjustVideoWidthOnLoad);
</script>
<script>

window.onclick = function(event) {
  if (!event.target.matches('.dropbtn')) {
    var dropdowns = document.getElementsByClassName("dropdown-content");
    var i;
    for (i = 0; i < dropdowns.length; i++) {
      var openDropdown = dropdowns[i];
      if (openDropdown.classList.contains('show')) {
        openDropdown.classList.remove('show');
      }
    }
  }
}
</script>

<script src="https://unpkg.com/peerjs@1.3.1/dist/peerjs.min.js" defer></script>
<script  src="/socket.io/socket.io.js" defer></script>
<script src="https://kit.fontawesome.com/62d14f866e.js" crossorigin="anonymous"></script>

<body>
    <div class="main">
    	<div class="main__left">
    		<div class="main__videos">
    		     <div id="video-grid">
	        
	             </div>
	        </div>
	        <div class="main__controls">
	        	<div class="main__controls__block">
	        		<div onclick="muteUnmute()" class="main__controls__button Mute__button">
	        			<i class="fas fa-microphone"></i>
	        			<span>Mute</span>
	        		</div>
	        		<div onclick="videoOnOff()" class="main__controls__button Video__button">
	        			<i class="fas fa-video"></i>
	        			<span>Stop Video</span>
	        		</div>
	        	</div>	
	        	<div  class="main__controls__block">
	        		<div onclick="screenshare()" class="main__controls__button">
	        			<i class="fas fa-photo-video"></i>
	        			<span>ScreenShare</span>
	        		</div>
	        		<div onclick="getUsers()" class="main__controls__button">
	        			<!-- remove -->
	        			<div class="dropdown">
	        				<i class="fas fa-user-friends dropbtn"></i>
	        			    <!-- <span>Participants</span> -->
				  			<div id="myDropdown" class="dropdown-content">
				  			<!-- ADD NEW <a> TAGS -->
				  			</div>
						</div>
						<span>Participants</span>
	        		</div>
	        		<div onclick="share()" class="main__controls__button">
	        			<i class="fa fa-share-alt"></i>
	        			<span>Share</span>
	        		</div>
	        		<div onclick="raisedHand()" class="main__controls__button raisedHand">
	        			<i class="far fa-hand-paper"></i>
	        			<span>Hand</span>
	        		</div>
					<!-- ThÃªm icon chat -->
	        		<div onclick="toggleChat()" class="main__controls__button">
	        			<i class="fas fa-comment"></i>
	        			<span>Chat</span>
	        		</div>
	        	</div>
	        	<div class="main__controls__block">	
	        		<div onclick="disconnectNow()" class="main__controls__button main__leave"  style=" color: Tomato;">
	        			<span style="color: red;">Leave Meeting</span>
	        		</div>
	        	</div>	
	        		
	        	
	        </div>
    	</div>
        
        <div class="main__right hidden">
             <div class="main__header">
             	<h6 style="padding: 15px 0;">Chat</h6>
			 </div>
			 <div class="main__chat_window">
				<ul class="messages">
				</ul>
			 </div>
			  <div class="main__messages_container">
				<input id="chat_messages" type="text" placeholder="Type message here...">
			  </div>
			  
        </div>

		
		<script src="script.js" defer></script>
    
</body>

</html>
